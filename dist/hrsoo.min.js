!function e(t,r,n){function s(o,i){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[o]={exports:{}};t[o][0].call(p.exports,function(e){var r=t[o][1][e];return s(r?r:e)},p,p.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,r){var n=e("./hrsoo.parser"),s=e("./hrsoo.formatter");t.exports={parse:n.parse,stringify:s.stringify,format:s.format}},{"./hrsoo.formatter":2,"./hrsoo.parser":4}],2:[function(e,t,r){function n(e){if(e=e||0,0>=e&&(e=0),0===e||2400===e)return"midnight";if(1200===e)return"noon";var t=Math.floor(e/100),r=e-100*t,n=t>11&&24>t?"pm":"am";t>12&&(t-=12);var s=t;return r&&(s+=":"+r),s+n}function s(e,t,r){if(t=t||"est",r=r||"est",!e)return"closed";if(e.allDay)return"all day";for(var s=u[r]-u[t],a=0,o="",i="",l=null;2400>=a;)o=n(a+s),e[a+""]&&!l?l=o:e[a+""]&&2400!==a||!l||(i&&(i+=", "),i+=l+"-"+o,l=null),a+=a%100===0?30:70;return i?i:"closed"}function a(e,t){e=e||{},t=t||{};var r=t.type||"medium";if(e.everyDayAllTime)return"short"===r?"24-7":"24 hours, 7 days";for(var n,a,o,i=e.timezone||"est",u=t.timezone||i,p=l.daysOfWeek,m=l.aliases.days,f="",y=null,d=null,c=null,g=0;7>g;g++){if(n=p[g],a="short"===r?m[n][0]:"medium"===r?m[n][2]:n,a=a.substring(0,1).toUpperCase()+a.substring(1),o=e[n]?s(e[n],i,u):"closed",e.isAllWeekSameTime){f=o;break}y?o!==y&&("closed"!==y&&(f&&(f+=", "),f+=d,c!==d&&(f+="-"+c),f+=" "+y),d=a,y=o):(y=o,d=a),c=a}return y&&"closed"!==y&&(f&&(f+=", "),f+=d,c!==d&&(f+="-"+c),f+=" "+y),f+" "+u.toUpperCase()}function o(e,t){var r=i.parse(e,t);return a(r,t)}var i=e("./hrsoo.parser"),l=e("./hrsoo.utils"),u={est:500,cst:400,mst:300,pst:200};t.exports={getTimeString:n,formatTime:s,stringify:a,format:o}},{"./hrsoo.parser":4,"./hrsoo.utils":5}],3:[function(e,t,r){function n(e){if(!e||!e.text)return e;for(var t,r=e.text.length,n=e.index||0,s="",a=n>0?e.text.charAt(n-1):null;r>n;){if(t=e.text.charAt(n),!i.isIgnore(t)){if(!i.isLetter(t))break;s+=t}n++}if(e.index=n,!s)return e;s=s.toLowerCase(),e.tokens=e.tokens||[];var o=i.lookupAlias("timezones",s),l=i.lookupAlias("days",s),u=i.lookupAlias("operations",s);return i.isAmPm(s,a)?("a"===s&&(s="am"),"p"===s&&(s="pm"),e.tokens.push({type:"ampm",value:s})):o?e.tokens.push({type:"timezone",value:o}):u?e.tokens.push({type:"operation",value:u}):l?e.tokens.push({type:"days",value:[l]}):"closed"===s&&e.tokens.push({type:"time",value:{isClosed:!0}}),e}function s(e){for(var t,r,n,s="0",a=!1,o=0;e.index<e.text.length;){if(t=e.text.charAt(e.index),":"===t||!a&&3>o&&"."===t)a=!0,r=parseInt(s),s="0";else{if(!i.isNumber(t))break;s+=t}o++,e.index++}if(r?n=parseInt(s):(r=parseInt(s),n=0),r>12&&!a&&(r+"").length>2){var l=r;r=Math.floor(l/100),n=l-100*r}return e.tokens=e.tokens||[],e.tokens.push({type:"time",value:{hrs:r,mins:n}}),e}function a(e){e.tokens=e.tokens||[];var t=e.text;return t=t.replace(/eastern standard time/g,"est"),t=t.replace(/eastern time/g,"est"),t=t.replace(/pacific standard time/g,"pst"),t=t.replace(/pacific time/g,"pst"),t=t.replace(/mountain standard time/g,"mst"),t=t.replace(/mountain time/g,"mst"),t=t.replace(/central standard time/g,"cst"),t=t.replace(/central time/g,"cst"),t=t.replace(/midnight/g,"12am"),t=t.replace(/â€“/g,"through"),t=t.replace(/ã¢â‚¬â€œ/g,"through"),t=t.replace(/\//g," "),t=t.replace("7 days a week","7 days"),t=t.replace("seven days a week","7 days"),t.indexOf("24 hours")>-1&&(e.tokens.push({type:"time",value:{allDay:!0}}),t=t.replace("24 hours","")),t.indexOf("7 days")>-1&&(e.tokens.push({type:"days",value:i.daysOfWeek}),t=t.replace("7 days","")),e.text=t,e}function o(e,t){if(!e)return[];var r,o,l={text:e.toLowerCase(),index:0,tokens:[]};for(t&&t.noLog&&(l.noLog=!0),l=a(l);l.index<l.text.length;)r=l.text.charAt(l.index),i.isLetter(r)?l=n(l):i.isNumber(r)?l=s(l):i.isSkip(r)?l.index++:(o=i.lookupAlias("operations",r),o?l.tokens.push({type:"operation",value:o}):i.log("Unexpected character: "+r,l),l.index++);return l.tokens||[]}var i=e("./hrsoo.utils");t.exports={readString:n,readTime:s,checkCommonHours:a,getTokens:o}},{"./hrsoo.utils":5}],4:[function(e,t,r){function n(e){e=e||{},e.tokens=e.tokens||[];var t,r,n;for(t=e.tokens.length-1;t>=0;t--)r=e.tokens[t],"timezone"===r.type&&(n&&r.value!==n?y.log("Multiple timezones found. Using "+n+" and ignoring "+r.value,e):n=r.value,e.tokens.splice(t,1));return e.timezone=n||"est",e}function s(e){e=e||{},e.tokens=e.tokens||[];var t,r,n;for(t=e.tokens.length-1;t>0;t--)if(r=e.tokens[t],n=e.tokens[t-1],"ampm"===r.type){if("operation"===n.type){if(e.tokens.splice(t-1,1),t--,0===t)break;n=e.tokens[t-1]}"time"===n.type?n.ampm=r.value:y.log("Previous token is "+n.type+" "+n.value+" so ignore timezone "+r.value,e),e.tokens.splice(t,1)}return e}function a(e){e=e||{};var t=e.tokens;return 2===t.length&&"time"===t[0].type&&"time"===t[1].type&&t.splice(1,0,{type:"operation",value:"through"}),3===t.length&&"time"===t[0].type&&"operation"===t[1].type&&"through"===t[1].value&&"time"===t[2].type&&t.splice(0,0,{type:"days",value:y.daysOfWeek}),e}function o(e,t,r){var n,s;for(n=e.tokens.length-1;n>=0;n--)s=e.tokens[n],"operation"===s.type&&s.value===t&&(e=r(e,n));return e}function i(e,t){if(1>t||t>e.tokens.length-2)return y.log("Through operation without prev or next",e),e.tokens.splice(t,1),e;var r,n,s,a,o,i=e.tokens[t-1],l=e.tokens[t+1];if(i.type!==l.type||"days"!==i.type&&"time"!==i.type)return e.tokens.splice(t,1),e;if("days"===i.type){if(!i.value.length||!l.value.length)return y.log("No days in prev or next",e),e.tokens.splice(t,1),e;if(n=y.daysOfWeek.indexOf(i.value[0]),s=y.daysOfWeek.indexOf(l.value[0]),0>n||1>s)return y.log("Start or end day does not exist",e),e.tokens.splice(t,1),e;for(i.value=[],r=n;s>=r&&r<y.daysOfWeek.length;r++)i.value.push(y.daysOfWeek[r]);if(n>s)for(r=0;s>=r;r++)i.value.push(y.daysOfWeek[r]);e.tokens.splice(t,2)}else"time"===i.type&&(i.value=i.value||{},l.value=l.value||{},a=100*(i.value.hrs||0)+(i.value.mins||0),o=100*(l.value.hrs||0)+(l.value.mins||0),(l.ampm&&"pm"===l.ampm||!l.ampm&&800>o||1200===o&&"am"===l.ampm)&&(o+=1200),(i.ampm&&"pm"===i.ampm&&1200>a||!i.ampm&&500>a)&&(a+=1200),a===o&&1200>=a&&1200>=o&&(!l.ampm||"pm"!==l.ampm)&&(o+=1200),o>300&&a>=o&&y.log("Start time "+a+" must be before end time "+o,e),i.value={ranges:[{start:a,end:o}]},delete i.ampm,e.tokens.splice(t,2));return e}function l(e){e=e||{};var t=e.tokens||[];if(t.length<2)return e;var r,n,s;for(s=t.length-1;s>0;s--)r=t[s-1],n=t[s],1===s&&r.value.hours&&y.log("Token "+(s-1)+" has hours in compressDayTimes",e),n.value.hours&&y.log("Token "+s+" has hours in compressDayTimes",e),"time"!==r.type||r.value.isClosed||"time"!==n.type||n.value.isClosed?"days"===r.type&&"days"===n.type&&(r.value=r.value.concat(n.value),t.splice(s,1)):(r.value.ranges=r.value.ranges||[],r.value.ranges=r.value.ranges.concat(n.value.ranges||[]),n.value.allDay&&(r.value.allDay=!0),t.splice(s,1));return e}function u(e){e=e||[];var t,r,n,s,a={};for(t=0;t<e.length;t++)for(r=e[t],n=r.start;n<r.end;)s=n+"",a[s]=!0,n+="00"===s.substring(s.length-2)?30:70;return a}function p(e){for(var t,r,n,s,a,o,i={},l=e.tokens||[],p=l.length-1,m=0,f=!0,d=!0,c=null;p>m;){t=e.tokens[m],r=e.tokens[m+1],"time"!==t.type&&"days"!==r.type&&(t=e.tokens[m+1],r=e.tokens[m]);var g=JSON.stringify(t);if(c?c!==g&&(d=!1):c=g,"time"===t.type||"days"===r.type){for(n=u(t.value.ranges),s=0;s<r.value.length;s++)if(a=r.value[s],i[a]=i[a]||{},t.value.allDay)i[a].allDay=!0;else{f=!1;for(o in n)n.hasOwnProperty(o)&&(i[a][o]=!0)}m+=2}else y.log("Tokens "+m+" and "+(m+1)+" not time - days pair",e),m++}var h=7===Object.keys(i).length;return h&&f?{everyDayAllTime:!0}:(i.isAllWeekSameTime=h&&d,i.timezone=e.timezone||"est",i)}function m(e,t){var r={};return t&&t.noLog&&(r.noLog=!0),t&&t.logHandler&&(r.logHandler=t.logHandler),r.tokens=f.getTokens(e,t),r=n(r),r=s(r),r=a(r),r=o(r,"through",i),r=l(r),p(r)}var f=e("./hrsoo.lexer"),y=e("./hrsoo.utils");t.exports={throughOp:i,parseTimezone:n,parseAmPm:s,timeAllWeek:a,doOperations:o,compressDayTimes:l,getTimeProfile:u,getDayTimes:p,parse:m}},{"./hrsoo.lexer":3,"./hrsoo.utils":5}],5:[function(e,t,r){function n(e){return(e>="a"&&"z">=e||e>="A"&&"Z">=e)&&"string"==typeof e}function s(e){return e>="0"&&"9">=e&&"string"==typeof e}function a(e){return p.indexOf(e)>-1||m.indexOf(e)>-1}function o(e){return m.indexOf(e)>-1}function i(e,t){return"am"===e||"pm"===e||t&&!isNaN(t)&&("a"===e||"p"===e)}function l(e,t){var r,n,s,a,o=y[e]||{},i=Object.keys(o);for(r=0;r<i.length;r++){if(s=i[r],s===t)return s;for(a=o[s],n=0;n<a.length;n++)if(a[n]===t)return s}return null}function u(e,t){t=t||{},t.logHandler?t.logHandler(e+" || state = "+JSON.stringify(t)):t.noLog||console.log(e+" || state = "+JSON.stringify(t))}var p=[" ","\r","	","\n",""," "],m=[".","(",")",",","and",":","all","times","&","#",";","|"],f=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],y={operations:{through:["-","~","to","thru"]},timezones:{est:["et","eastern"],cst:["ct","central"],mst:["mt","mountain"],pst:["pt","pacific"]},days:{monday:["m","mo","mon","mom"],tuesday:["t","tu","tue","tues"],wednesday:["w","we","wed"],thursday:["t","th","thu","thur","thurs"],friday:["f","fr","fri"],saturday:["s","sa","sat"],sunday:["s","su","sun"]}};t.exports={daysOfWeek:f,aliases:y,isLetter:n,isNumber:s,isSkip:a,isIgnore:o,isAmPm:i,lookupAlias:l,log:u}},{}]},{},[1]);
//# sourceMappingURL=hrsoo.min.js.map